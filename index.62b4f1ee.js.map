{"mappings":"qhBACA,IAAAA,EAAAC,EAAA,S,aCDO,SAASC,EAAgBC,GAC9BC,SAASC,eAAe,WAAWC,UAAYH,C,CCEjD,MAGaI,EAAYC,MAAQC,EAAOC,EAAO,KAC7C,IACE,MAAMC,QAAYC,MAAM,qEAAgCH,kEAAsEC,iBACxHG,QAAiBF,EAAIG,OAE3B,GAAID,EAASE,MAAQF,EAASE,KAAKC,OAAS,EAAG,CAChCH,EAASE,KAAKE,KAAIC,GAAOA,EAAIC,OAK1C,OAAON,EAASE,I,CAEhBb,EAAgB,2B,CAElB,MAAOkB,GACPlB,EAAgB,MAAMkB,SACtBC,QAAQC,MAAMF,E,GFdlB,MAAMG,EAAOnB,SAASC,eAAe,eAC/BmB,EAAUpB,SAASqB,cAAc,YACjCC,EAAiBtB,SAASqB,cAAc,cACxCE,EAAW,IAAIC,EAAA5B,GAAJ,CAAmB,aAAc,CAC9C6B,gBAAgB,IAGpB,IAAIC,EAAO,EAEXP,EAAKQ,iBAAiB,UAAUvB,MAAOwB,IACnCA,EAAEC,iBACFH,EAAO,EACP,MACMI,EADOF,EAAEG,cACSC,SAASC,YAAYC,YACvCC,EAAaL,EAAYJ,EAAK,IAGxCJ,EAAeK,iBAAiB,SAASvB,UACrCsB,GAAQ,EACR,MAAMI,EAAaX,EAAKa,SAASC,YAAYC,YACvCC,EAAaL,EAAYJ,EAAK,IAGxC,IAAIU,GAAuB,EAE3BhC,eAAe+B,EAAa9B,EAAOgC,EAAO,GACtC,IAEiB,IAATA,IACAjB,EAAQlB,UAAY,GACpBkC,GAAuB,GAG3B,MAAM3B,QAAiBN,EAAUE,EAAOgC,GAExC,GAAwB,IAApB5B,EAASG,SAAiBwB,EAE1B,YADAZ,EAAAc,GAASC,OAAOC,QAAQ,SAAU,kDAAmD,qBAIzF,MAAMC,EAAUpC,EAAMqC,cAEtBjC,EAASkC,SAASC,IAMd,GALaA,EAAM7B,KAAK2B,cACFG,MAAM,KAEKC,MAAMC,GAAYA,EAAQC,SAAWP,IAEjD,CACjBL,GAAuB,EAEvB,MAAMa,EAAOjD,SAASkD,cAAc,OACpCD,EAAKE,UAAUC,IAAI,cACnBH,EAAK/C,UAAY,kCACF0C,EAAMS,yBAAyBT,EAAM7B,6CAChC6B,EAAMU,sBAAsBV,EAAM7B,uJAGT6B,EAAMW,yEACNX,EAAMY,4EACHZ,EAAMa,gFACLb,EAAMc,8DAGvDtC,EAAQuC,YAAYV,E,KAI5B1B,EAASqC,UAEI,IAATvB,IACAf,EAAeuC,MAAMC,QAAU,O,CAErC,MAAO5C,GACLD,QAAQC,MAAMA,E","sources":["src/index.js","src/js/markup.js","src/js/api.js"],"sourcesContent":["\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\nimport Notiflix from 'notiflix';\nimport { getPhotos} from './js/api.js';\n// import { updatePhotoList } from \"./markup.js\";\n\n\nconst form = document.getElementById('search-form');\nconst gallery = document.querySelector(\".gallery\");\nconst loadMoreButton = document.querySelector(\".load-more\");\nconst lightbox = new SimpleLightbox('.gallery a', {\n    animationSlide: false,\n});\n\nlet page = 1;\n\nform.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    page = 1; \n    const form = e.currentTarget;\n    const inputValue = form.elements.searchQuery.value;\n    await searchImages(inputValue, page);\n});\n\nloadMoreButton.addEventListener(\"click\", async () => {\n    page += 1;\n    const inputValue = form.elements.searchQuery.value;\n    await searchImages(inputValue, page);\n});\n\nlet hasValidImagesOnPage = false;\n\nasync function searchImages(query, page = 1) {\n    try {\n       \n        if (page === 1) {\n            gallery.innerHTML = \"\";\n            hasValidImagesOnPage = false;\n        }\n\n        const response = await getPhotos(query, page);\n\n        if (response.length === 0 && !hasValidImagesOnPage) {\n            Notiflix.Report.failure('Sorry!', 'There are no images matching your search query.', 'Please try again.');\n            return;\n        }\n\n        const keyword = query.toLowerCase();\n\n        response.forEach((image) => {\n            const tags = image.tags.toLowerCase();\n            const tagWords = tags.split(',');\n\n            const hasExactKeyword = tagWords.some((tagWord) => tagWord.trim() === keyword);\n\n            if (hasExactKeyword) {\n                hasValidImagesOnPage = true;\n\n                const card = document.createElement(\"div\");\n                card.classList.add(\"photo-card\");\n                card.innerHTML = `\n                    <a href=\"${image.largeImageURL}\" title=\"${image.tags}\">\n                        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\">\n                    </a>\n                    <div class=\"info\">\n                        <p class=\"info-item\"><b>Likes:</b> ${image.likes}</p>\n                        <p class=\"info-item\"><b>Views:</b> ${image.views}</p>\n                        <p class=\"info-item\"><b>Comments:</b> ${image.comments}</p>\n                        <p class=\"info-item\"><b>Downloads:</b> ${image.downloads}</p>\n                    </div>\n                `;\n                gallery.appendChild(card);\n            }\n        });\n\n        lightbox.refresh();\n\n        if (page === 1) {\n            loadMoreButton.style.display = \"flex\";\n        }\n    } catch (error) {\n        console.error(error);\n    }\n}","export function updatePhotoList(markup) {\n  document.getElementById('gallery').innerHTML = markup;\n}\n\n\n","\nimport { updatePhotoList } from './markup';\n\nconst ENDPOINT = 'https://pixabay.com/api/';\nconst API_KEY = '40064667-dee000e37b39a04836075971b';\n\nexport const getPhotos = async  (query, page = 1) => {\n  try {\n    const res = await fetch(`${ENDPOINT}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=20`);\n    const response = await res.json();\n\n    if (response.hits && response.hits.length > 0) {\n      const tags = response.hits.map(hit => hit.tags); \n\n     \n     \n\n      return response.hits;\n    } else {\n      updatePhotoList('<p>No results found.</p>');\n    }\n  } catch (err) {\n    updatePhotoList(`<p>${err}</p>`);\n    console.error(err);\n  }\n};\n\nexport default { getPhotos };"],"names":["$fZKcF","parcelRequire","$263aef85a4d00bfb$export$d2d2643bfe39d432","markup","document","getElementById","innerHTML","$56ca17bb174b0ce3$export$6b037c6982b42afc","async","query","page","res","fetch","response","json","hits","length","map","hit","tags","err","console","error","$1f0dc3b9307be026$var$form","$1f0dc3b9307be026$var$gallery","querySelector","$1f0dc3b9307be026$var$loadMoreButton","$1f0dc3b9307be026$var$lightbox","$parcel$interopDefault","animationSlide","$1f0dc3b9307be026$var$page","addEventListener","e","preventDefault","inputValue","currentTarget","elements","searchQuery","value","$1f0dc3b9307be026$var$searchImages","$1f0dc3b9307be026$var$hasValidImagesOnPage","page1","$7Y9D8","Report","failure","keyword","toLowerCase","forEach","image","split","some","tagWord","trim","card","createElement","classList","add","largeImageURL","webformatURL","likes","views","comments","downloads","appendChild","refresh","style","display"],"version":3,"file":"index.62b4f1ee.js.map"}